#!/bin/bash

USER=$(whoami)

# --- Check root ---
if [ "$USER" != "root" ]; then
    dialog --title "Permission Denied" --msgbox "This program must be run as root.\nExiting." 7 50
    exit 1
fi

# --- Clear screen ---
clear

# --- Main dialog header ---
dialog --title "System Management" --msgbox "Shutdown Server\n\nThis will SHUTDOWN the system now." 8 60

# --- Confirm shutdown ---
dialog --title "Confirm Shutdown" --yesno "Do you want to proceed with shutting down the server?" 8 60
RESPONSE=$?

if [ $RESPONSE -eq 0 ]; then
    dialog --title "Powering Off" --msgbox "The system will shutdown now..." 6 50
    sleep 1
    shutdown -h now
else
    dialog --title "Cancelled" --msgbox "Shutdown operation cancelled." 6 50
    exit 0
fi
