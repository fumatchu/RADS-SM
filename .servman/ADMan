#!/bin/bash
user=$(whoami)
#Checking for user permissions
if [ "$user" != "root" ]; then
    echo ${red}"This program must be run as root ${textreset}"
    echo "Exiting"
    exit
else
    echo "Running Program"
fi

items=(1 "Add User"
    2 "Delete User"
    3 "Password Reset"
    4 "List All Users"
    5 "Create New Group"
    6 "Delete Group"
    7 "List Groups"
    8 "Move users to Group"
    9 "Remove User from Group"
)

while choice=$(dialog --title "$TITLE" \
    --backtitle "Active Directory Management" \
    --menu "Please select" 25 40 3 "${items[@]}" \
    2>&1 >/dev/tty); do
    case $choice in
    1) /root/.servman/ADManager/ADadduser ;;
    2) /root/.servman/ADManager/ADdeluser ;;
    3) /root/.servman/ADManager/ADpassreset ;;
    4) /root/.servman/ADManager/ADlistalluser ;;
    5) /root/.servman/ADManager/ADcreatenewgroup ;;
    6) /root/.servman/ADManager/ADdeletegroup ;;
    7) /root/.servman/ADManager/ADlistgroup ;;
    8) /root/.servman/ADManager/ADmoveusertogroup ;;
    9) /root/.servman/ADManager/ADrmusrfrmgrp ;;

    esac
done
clear # clear after user pressed Cancel
